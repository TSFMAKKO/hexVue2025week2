import{r as t,c as f,b as o,e as C,f as m,g as x,d as y,v as p,t as _,w as h,h as V,a as k,F as U,u as S,o as v}from"./index-BlM_CmF3.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={id:"signUpPage",class:"bg-yellow"},q={class:"conatiner signUpPage vhContainer"},T={key:0,class:"error-message"},B="https://todolist-api.hexschool.io",I={__name:"SignUpView",setup(j){const g=S(),r=t("example444@gmail.com"),a=t("12345678"),i=t("12345678"),u=t("example444"),n=t(""),d=t(!1),c=t(!1),b=()=>{if(n.value="",!r.value||!u.value||!a.value||!i.value){n.value="請填寫所有欄位";return}if(a.value!==i.value){n.value="兩次輸入的密碼不一致";return}if(a.value.length<6){n.value="密碼長度至少需要6個字元";return}console.log("register"),d.value=!0,fetch(B+"/users/sign_up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.value,password:a.value,nickname:u.value})}).then(l=>(console.log(l),l.json())).then(l=>{console.log(l),l.status?(alert(`註冊成功 ${l.uid}`),c.value=!0,g.push("/login")):alert(`註冊失敗${l.message}`),d.value=!1}).catch(l=>{alert("註冊失敗"),d.value=!1})};return(l,e)=>{const w=k("router-link");return v(),f(U,null,[e[12]||(e[12]=o("h2",null,"註冊",-1)),o("div",N,[o("div",q,[e[11]||(e[11]=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),o("div",null,[o("form",{class:"formControls",onSubmit:C(b,["prevent"])},[e[5]||(e[5]=o("h2",{class:"formControls_txt"},"註冊帳號",-1)),e[6]||(e[6]=o("label",{class:"formControls_label",for:"email"},"Email",-1)),m(o("input",{class:"formControls_input",type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),placeholder:"請輸入 email",required:""},null,512),[[p,r.value]]),e[7]||(e[7]=o("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),m(o("input",{class:"formControls_input",type:"text",id:"name","onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),placeholder:"請輸入您的暱稱",required:""},null,512),[[p,u.value]]),e[8]||(e[8]=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),m(o("input",{class:"formControls_input",type:"password",id:"pwd","onUpdate:modelValue":e[2]||(e[2]=s=>a.value=s),placeholder:"請輸入密碼",required:""},null,512),[[p,a.value]]),e[9]||(e[9]=o("label",{class:"formControls_label",for:"confirmPwd"},"再次輸入密碼",-1)),m(o("input",{class:"formControls_input",type:"password",id:"confirmPwd","onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s),placeholder:"請再次輸入密碼",required:""},null,512),[[p,i.value]]),n.value?(v(),f("div",T,_(n.value),1)):x("",!0),e[10]||(e[10]=o("button",{type:"submit",class:"formControls_btnSubmit"},"註冊帳號",-1)),y(w,{to:"/login",class:"formControls_btnLink"},{default:h(()=>e[4]||(e[4]=[V("登入",-1)])),_:1,__:[4]})],32)])])])],64)}}},E=P(I,[["__scopeId","data-v-8021571b"]]);export{E as default};
